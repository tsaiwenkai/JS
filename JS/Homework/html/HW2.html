<!DOCTYPE html>
<html lang="zh-tw">
<head>
    <meta charset="UTF-8">
    <title>02checkPassword.html</title>
    <link rel="stylesheet" href="/Homework/StyleSheet1.css" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Merriweather:ital@1&display=swap');

        fieldset {
            border: 2px solid #808080;
            width: 500px;
            margin: 100px auto;
            border-radius: 25px;
            box-shadow: 15px 15px 5px #808080;
        }

            fieldset:hover {
                box-shadow: 0 0 15px #808080;

            }

        legend {
            text-shadow: 5px -5px 5px #808080
        }

    </style>
</head>
<body>
    <fieldset>
        <legend style="font-family:'Merriweather', serif;">Form check</legend>
        <label>姓名: <input type="text" id="idtxtname" size="6" onblur="checkName();" /></label>
        <span id="idnamesp"></span><br />
        <!--<input type="button" id="idbtNA" value="check姓名" onclick="checkName();" /><br />-->
        <span style="font-size:10px; color:gray">(1.不可空白 2.至少兩個字以上 3.必須全部為中文字)</span>
        <hr />
        <label>密碼: <input type="password" id="idPwd" size="6" onblur="checkPwd();" /></label>
        <span id="idsp"></span><br />
        <!--<input type="button" id="idbut" value="checkPassword" onclick="checkPwd();" /><br />-->
        <span style="font-size:10px;color:gray">(1.不可空白 2.至少6個字以上 3.必須包含英文數字,特殊字元(!@#$%^&*))</span>
        <hr />

        <label>日期: <input type="text" id="txtdate" size="6" /></label>
        <span id="iddatesp">span</span><br />
        <input type="button" id="idbtdate" value="check生日" onclick="checkdate();" /><br />
        <span style="font-size:10px;color:gray">格式:西元年/月/日(yyyy/mm/dd)</span>
        <hr />
    </fieldset>
    <script>
        function checkName() {
            let name = document.getElementById("idtxtname").value;
            let namelnth = name.length;
            let namsp = document.getElementById("idnamesp");
            flag1 = false; flag2 = false; flag3 = false;
            if (name == " ")
                namsp.innerHTML = "名字不可為空白";
            else if (namelnth >= 2) {
                for (var i = 0; i < namelnth; i++) {
                    let ch = name.charCodeAt(i);
                    if (ch >= 0x4e00 && ch <= 0x9fff) {
                        flag1 = true;
                    }
                    else {
                        flag1 = false;
                        namsp.innerHTML = "請輸入中文";
                    }
                }
                flag2 = true;
                if (flag1 && flag2)
                    namsp.innerHTML = "成功!";
            }
            else
                namsp.innerHTML = "請輸入兩個字以上";
        }
        function checkPwd() {
            //取得idPwd元素
            let pwd = document.getElementById("idPwd");
            console.log(typeof pwd);
            //取得idPwd元素值
            let pwdoval = pwd.value;
            console.log(typeof pwdoval);
            console.log(pwdoval);
            let pwdlet = pwdoval.length;
            let sp = document.getElementById("idsp")
            flag1 = false; flag2 = false; flag3 = false;
            //判斷元素值是否為空白，密碼長度是否大於6
            //如果長度是否大於6，判斷是否包含字母、數字、特殊符號
            if (pwdoval == " ")
                sp.innerHTML = "請勿輸入空白";
            else if (pwdlet >= 6) {
                for (var i = 0; i < pwdlet; i++) {
                    let ch = pwdoval.charAt(i).toUpperCase();
                    console.log(ch);
                    if (ch >= "A" && ch <= "Z")
                        flag1 = true;
                    else if (ch >= "0" && ch <= "9")
                        flag2 = true;
                    else if (ch.lastIndexOf(`!@#$%^&*`))
                        flag3 = true;
                    if (flag1 && flag2 && flag3) break;
                }
                if (flag1 && flag2 && flag3)
                    sp.innerHTML = "correct";
                else
                    sp.innerHTML = "incorrect";
            }
            else {
                sp.innerHTML = "請輸入超過6個字"
            }
        }
        function checkdate() {
            let txtdate = document.getElementById("txtdate").value;
            let datesp = document.getElementById("iddatesp");
            if (!txtdate.match(/^\d{4}\/\d{1,2}\/\d{1,2}$/)) {
                datesp.innerHTML = "請輸入正確格式";
                return;
            }
            let date = txtdate.split('/');

            let d = new Date(date[0], date[1], date[2]);
            let m = d.getMonth();
            let dt = d.getDate();
            let y = d.getFullYear();

            if (date[0] != y || date[1] != m || date[2] != dt) {
                datesp.innerHTML = "請輸入正確日期格式";
            }
            else {
                datesp.innerHTML = "成功";
            }
            //let datesp = document.getElementById("iddatesp");
            //flag1 = false; flag2 = false; flag3 = false;

            //if (date[0].length >= 4 && date[0] < y) {
            //    flage1 = true;
            //}
            //else if (date[1].length >= 2 && date[1] < m) {
            //    flage2 = true;
            //}
            //else if (date[2].length >= 2 && date[2] < dt) {
            //    flage3 = true;
            //}
            //else if (flage1 == true && flage2== true && flage3==true )
            //    datesp.innerHTML = "成功!"
            //else datesp.innerHTML="請輸入正確日期格式"
        }
    </script>
</body>
</html>
